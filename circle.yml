machine:
  python:
    version: 3.6.0

  services:
    - redis
    - rabbitmq-server

  environment:
    REDISCLOUD_URL: redis://localhost:6379
    MONGOHQ_URL: mongodb://127.0.0.1:27017/db
    RABBITMQ_BIGWIG_URL: "amqp://guest:guest@127.0.0.1/"
    X_RABBITMQ_BIGWIG_URL: "amqp://guest:guest@127.0.0.1/"


dependencies:
  post:
    - pip install flake8


test:
  override:
    - python -m pytest
    - flake8


deployment:
  prod:
    branch: master
    heroku:
      appname: pushw-campaigns
